# 1ES.Decisions


В справочнике "Договоры контрагентов" есть реквизит "Вид договора", который может принимать одно из 3-ч значений:
С покупателем
С поставщиком
Прочее
Для каждого контрагента, который является владельцем договора устанавливается тип отношений(Покупатель, Поставщик, Перевозчик, Прочее).
Нужно доработать механизм создания новых договоров и контролировать соответствие вида договора с типом отношений, который установлен для контрагента.
   Если для контрагента установлен тип отношений "Покупатель", то для него можно создавать договоры только вида "С покупателем".
   Если для контрагента установлен тип отношений "Поставщик" или "Перевозчик", то для него можно создавать договоры только вида "С поставщиком".
   Если для контрагента установлен тип отношений "Прочие отношения", то для него можно создавать договоры только вида "Прочее".
Нужно добавить контроль соответствия вида договоров типу отношений с контрагентом. Контроль должен выполняться перед записью договора. Если вид договора не соответствует типу отношений с контрагентом, то такой договор не должен быть записан. Кроме того, пользователь должен получить сообщение, из которого будет понятно, почему договор не записывается.


Процедура ПередЗаписью(Отказ) 
 Если Владелец.Покупатель Тогда       
	 Если ВидДоговора <> Перечисления.ВидыДоговоров.СПокупателем Тогда 
		 Отказ = Истина;
		 Сообщить("Не тот вид договора");  // Ну и сделать несколько условий (ИначеЕсли)
	 КонецЕсли;  
 КонецЕсли;	 
 КонецПроцедуры;
 
